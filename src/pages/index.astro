---
import Layout from '../layouts/Layout.astro';
import Project from '../components/Project.astro';
import Profile from '../components/Profile.astro';
import Socials from '../components/Socials.astro';
---



<Layout title = "Portfolio">
</Layout>
	<section class="intro">
		<p class="intro-kicker">Hello, I'm David.</p>
		<h2 class="intro-title">I program games, design mechanics and create interactive experiences.</h2>
		<p class="intro-text"> With passion. </p>
	</section>
<div class="tab"> 
	<div class="tab-buttons">
		<button data-tab="projects" class="active">Projects</button>
		<button data-tab="mechanics">Mechanics</button>
		<button data-tab="about">About me</button> 
	</div>
	
	<div class="tab-content active" id="projects">
		<h2>Projects</h2>
		<ul class="projects-grid">
			<li><Project title="Project Duality" description="Coop adventure puzzle game, with two players controlling opposing forces." date="In Development" link="/Details/ProjectDuality" thumbnail="/images/PD/PDThumb.png" tags={["Unreal Engine", "C++", "Blueprint", "Multiplayer"]}/></li>
			<li><Project title="Soulsworn Manor" description="Dark fantasy terror runner set in a haunted manor." date="March - June 2025" link="/Details/SoulswornManor" thumbnail="/images/SWM/SWM-Thumb.png" tags={["Unreal Engine", "C++", "Blueprint"]}/></li>
		</ul>
				<h2 id="Game-Jams">Game Jams</h2>
		<ul class="projects-grid">
			<li><Project title="Breach Protocol" description="Global Game Jam 2026" date="February 2026" link="/Details/BreachProtocol" thumbnail="/images/Breach/BPThumb.png" tags={["Godot", "GDScript", "Multiplayer"]}/></li>
			<li><Project title="Bubble-I-Zation" description="Global Game Jam 2025" date="January 2025" link="/Details/Bubbleization" thumbnail="/images/Bubble/BubbleThumb.jpg" tags={["Godot", "GDScript", "Bubbles"]}/></li>
			<li><Project title="Echoes of the Abyss" description="Ã–H Hackathon 2024" date="November 2024" link="/Details/EchoesoftheAbyss" thumbnail="/images/Abyss/AbyssThumb.jpg" tags={["Unity", "C#", "HLSL"]}/></li>
		</ul>
	</div>

	<div class="tab-content" id="mechanics" hidden>
		<h2>Mechanics and Systems</h2>
		<ul class="projects-grid">
			<li><Project title="Navigation Bar" description="Compass bar including markers for game UI." date="October 2025" link="#" thumbnail="/images/Mechanics/Navigation.png" tags={["UE","C++", "Slate", "UI"]}/></li>
			<li><Project title="Smartphone System" description="In-game smartphone UI hosting multiple functionalities." date="September 2025" link="#" thumbnail="/images/Mechanics/Smartphone.png" tags={["UE","Blueprint", "CommonUI"]}/></li>
		<!--- 
			<li><Project title="Junk loading" description="Compartmentalization of background elements, coupled with dynamic loading and unloading." date="September 2025" link="#" tags={["UE","Blueprint", "Optimization"]}/></li>
		-->	
		</ul>
	</div>

	<div class="tab-content" id="about" hidden>
		<h2>About Me</h2>
		<div style="display: flex; flex-direction: column; gap: 16px;">
				<Profile name="David Wagner" description="I am a game designer and developer with a passion for creating engaging gameplay experiences. I have experience in designing mechanics, prototyping, and coding." jobTitle="Game Programmer" image="/images/DavidWagnerProfile.png"
				resumeImage="/images/DavidWagnerCV.png" resumeDownload="/images/DavidWagnerCV.pdf" resumeAlt="Resumee preview"/>
			</div>
		</div>
	</div>
	<Socials/>

<!-- JavaScript for tab functionality -->
<script>
	document.addEventListener('DOMContentLoaded', () => {
		const tabButtons = document.querySelectorAll<HTMLButtonElement>('.tab-buttons button');
		const tabContents = document.querySelectorAll<HTMLElement>('.tab-content');

		const activateTab = (tabId: string) => {
			tabButtons.forEach(btn => btn.classList.remove('active'));
			tabContents.forEach(content => {
				content.classList.remove('active');
				content.hidden = true;
			});

			const activeButton = document.querySelector<HTMLButtonElement>(`.tab-buttons button[data-tab="${tabId}"]`);
			const activeContent = document.getElementById(tabId);

			if (activeButton) {
				activeButton.classList.add('active');
			}
			if (activeContent) {
				activeContent.classList.add('active');
				activeContent.hidden = false;
			}
		};

		tabButtons.forEach(button => {
			button.addEventListener('click', () => {
				const tab = button.dataset.tab as string;
				activateTab(tab);
			});
		});

		const url = new URL(window.location.href);
		const scrollTarget = url.searchParams.get('scroll') || (url.hash ? url.hash.slice(1) : null);

		if (scrollTarget) {
			activateTab('projects');
			window.scrollTo({ top: 0, behavior: 'auto' });
			setTimeout(() => {
				const targetElement = document.getElementById(scrollTarget);
				if (targetElement) {
					targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
				}
			}, 80);
		}
	});
</script>